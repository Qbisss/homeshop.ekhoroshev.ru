$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});$('button[id^="show"]').click(function(o){o.preventDefault();var t=window.location.href+$(this).attr("action");$.ajax({method:"GET",url:t,data:{},success:function(e){$(".content").empty(),$(".content").append(e)},error:function(e){console.log(e)}})});$("#content").on("click","#btn-add-category",function(o){$(".modal-body").empty(),$("#exampleModalLabel").text("Добавить категорию"),$(".modal-body").append('<form style="width: 22rem;" data-action="/addcategory" id="addcategory"><div data-mdb-input-init class="form-outline mb-4"><label class="form-label" for="form5Example1">Название</label><input type="text" id="form5Example1" class="form-control no-effect" name="name" /></div><div data-mdb-input-init class="form-outline mb-4"><label class="form-label" for="form5Example2">Приоритет</label><input type="text" id="form5Example2" class="form-control no-effect" name="priority" value="1" /></div></form> <button type="button" id="btnaddcat" class="btn btn-success">Добавить</button>')});$("#content").on("click","#btnsavecategory",function(o){o.preventDefault();var t=window.location.href+"/editcategory_process",e=new FormData,a=$("#editcategory").serializeArray();$.each(a,function(r,n){e.append(n.name,n.value)});var d=$('input[name="image"]').prop("files")[0];e.append("image",d),$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:e,processData:!1,contentType:!1,success:function(r){r.error?($("#modal-body").empty(),$("#modal-body").append(r.error)):($("#show").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(r){console.log(r)}})});$("#content").on("click","#btnedit",function(o){var t=window.location.href+"/editcategory",e=$(this).attr("edit");$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e},success:function(a){a.error?($("#modal-body").empty(),$("#modal-body").append(a.error)):($("#exampleModalLabel").text("Изменить категорию"),$("#modal-body").empty(),$("#modal-body").append(a))},error:function(a){console.log(a)}})});$("#content").on("click","#btndeletecategory",function(o){var t=window.location.href+"/deletecategory",e=$("#catid").val();console.log(e),$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e},success:function(a){a.error||($("#exampleModal").modal("toggle"),$("#show").trigger("click"))},error:function(a){console.log(a)}})});$("#content").on("click","#btnaddcat",function(o){o.preventDefault();var t=window.location.href+$("#addcategory").attr("data-action"),e=$("#addcategory").serializeArray();$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{data:e},success:function(a){a.error?($("#error").remove(),$(".btnaddcat").after('<div class="badge bg-danger" id="error">'+a.error+"!</div>")):($("#show").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(a){console.log(a)}})});$("#content").on("click","#btn-add-product",function(o){o.preventDefault();var t=window.location.href+"/modaladdproduct";$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,data:{},success:function(e){$(".modal-body").empty(),$("#exampleModalLabel").text("Добавить товар"),$(".modal-body").append(e)},error:function(e){console.log(e)}})});$("#content").on("change","#selectCategory",function(o){o.preventDefault();var t=window.location.href+"/modaladdproperties",e=$(this),a=e.val();$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:a},success:function(d){$("#properties").empty(),$("#properties").append(d)},error:function(d){console.log(d)}})});$("#content").on("click","#btnaddproduct",function(o){o.preventDefault();var t=window.location.href+"/addproduct_process",e=new FormData,a=$("#addproduct").serializeArray();$.each(a,function(l,c){e.append(c.name,c.value)});var d=$('input[name="image"]').prop("files")[0];e.append("image",d);var r=$('input[name="images"]')[0].files.length;e.append("TotalImages",r);for(var n=$('input[name="images"]')[0],i=0;i<r;i++)e.append("images"+i,n.files[i]);var s=$("#properties input").serializeArray();$.each(s,function(l,c){e.append(`properties[${c.name}]`,c.value)}),$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,data:e,success:function(l){l.error?($("#error").remove(),$("#btnaddproduct").after('<div class="badge bg-danger" id="error">'+l.error+"!</div>")):($(".prod").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(l){console.log(l)}})});$("#content").on("click","#btneditproduct",function(o){var t=window.location.href+"/editproduct",e=$(this).attr("edit");$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e},success:function(a){a.error?($("#modal-body").empty(),$("#modal-body").append(a.error)):($("#exampleModalLabel").text("Изменить товар"),$("#modal-body").empty(),$("#modal-body").append(a))},error:function(a){console.log(a)}})});$("#content").on("click","#btndeleteproduct",function(o){var t=window.location.href+"/deleteproduct",e=$("#productID").val();$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e},success:function(a){if(a.error){console.log(a.error);return}$("#exampleModal").modal("toggle"),$(".prod").trigger("click")},error:function(a){console.log(a)}})});$("#content").on("click","#btnsaveproduct",function(o){o.preventDefault();var t=window.location.href+"/saveproduct",e=new FormData,a=$("#editproduct").serializeArray();$.each(a,function(l,c){e.append(c.name,c.value)});var d=$('input[name="image"]').prop("files")[0];e.append("image",d);var r=$('input[name="images"]')[0].files.length;e.append("TotalImages",r);for(var n=$('input[name="images"]')[0],i=0;i<r;i++)e.append("images"+i,n.files[i]);var s=$("#properties input").serializeArray();$.each(s,function(l,c){e.append(`properties[${c.name}]`,c.value)}),$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,data:e,success:function(l){l.error?($("#error").remove(),$("#btndeleteproduct").after('<div class="badge bg-danger" id="error">'+l.error+"!</div>")):($(".prod").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(l){console.log(l)}})});$("#content").on("click","#searchproduct",function(o){o.preventDefault();var t=window.location.href+"/searchproduct/"+$("#search").val();$.ajax({method:"GET",url:t,data:{},success:function(e){if(e.error){$("#search").val(e.error);return}$(".content").empty(),$(".content").append(e)},error:function(e){console.log(e)}})});$("#content").on("click","#btn-add-property",function(o){o.preventDefault();var t=window.location.href+"/modaladdproperty";$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,data:{},success:function(e){$(".modal-body").empty(),$("#exampleModalLabel").text("Добавить свойство"),$(".modal-body").append(e)},error:function(e){console.log(e)}})});$("#content").on("click","#btnaddprop",function(o){o.preventDefault();var t=window.location.href+$("#addproperty").attr("data-action"),e=new FormData,a=$("#addproperty").serializeArray();$.each(a,function(r,n){e.append(n.name,n.value)});var d=$("#categories input").serializeArray();$.each(d,function(r,n){e.append("categories[]",n.name)}),$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,data:e,success:function(r){r.error?($("#error").remove(),$("#btnaddprop").after('<div class="badge bg-danger" id="error">'+r.error+"!</div>")):($(".prop").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(r){console.log(r)}})});$("#content").on("click","#btneditproperty",function(o){var t=window.location.href+"/editproperty",e=$(this).attr("edit");$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e},success:function(a){a.error?($("#modal-body").empty(),$("#modal-body").append(a.error)):($("#exampleModalLabel").text("Изменить свойство"),$("#modal-body").empty(),$("#modal-body").append(a))},error:function(a){console.log(a)}})});$("#content").on("click","#btnsaveproperty",function(o){o.preventDefault();var t=window.location.href+"/saveproperty",e=new FormData,a=$("#editproperty").serializeArray();$.each(a,function(r,n){e.append(n.name,n.value)});var d=$("#categories input").serializeArray();$.each(d,function(r,n){e.append("categories[]",n.name)}),$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,data:e,success:function(r){r.error?($("#error").remove(),$("#btnaddprop").after('<div class="badge bg-danger" id="error">'+r.error+"!</div>")):($(".prop").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(r){console.log(r)}})});$("#content").on("click","#btndeleteproperty",function(o){o.preventDefault();var t=window.location.href+"/deleteproperty",e=$("#propertyID").val();$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e},success:function(a){console.log(a),a.error?($("#error").remove(),$("#btnaddprop").after('<div class="badge bg-danger" id="error">'+a.error+"!</div>")):($(".prop").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(a){console.log(a)}})});$("#content").on("click","#searchproperty",function(o){o.preventDefault();var t=window.location.href+"/searchproperty/"+$("#search").val();$.ajax({method:"GET",url:t,data:{},success:function(e){if(e.error){$("#search").val(e.error);return}$(".content").empty(),$(".content").append(e)},error:function(e){console.log(e)}})});$("#content").on("click","#btn-add-badge",function(o){$(".modal-body").empty(),$("#exampleModalLabel").text("Добавить бейджик"),$(".modal-body").append('<form style="width: 22rem;" data-action="/addbadge" id="addbadge"><div data-mdb-input-init class="form-outline mb-4"><label class="form-label" for="form5Example1">Название</label><input type="text" id="form5Example1" class="form-control no-effect" name="name" /></div><div data-mdb-input-init class="form-outline mb-4"><label for="exampleColorInput" class="form-label">Выберите цвет</label><input type="color" name="color" class="form-control form-control-color" id="exampleColorInput" value="#563d7c" title="Выберите цвет"></div></form><button type="button" id="btnaddbadge" class="btn btn-success">Добавить</button>')});$("#content").on("click","#btnaddbadge",function(o){o.preventDefault();var t=window.location.href+$("#addbadge").attr("data-action"),e=$("#addbadge").serializeArray();$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:e,success:function(a){a.error?($("#error").remove(),$("#btnaddbadge").after('<div class="badge bg-danger" id="error">'+a.error+"!</div>")):($(".bdg").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(a){console.log(a)}})});$("#content").on("click","#btneditbadge",function(o){var t=window.location.href+"/editbadge/"+$(this).attr("edit");$.ajax({url:t,method:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{},success:function(e){e.error?($("#modal-body").empty(),$("#modal-body").append(e.error)):($("#exampleModalLabel").text("Изменить беджик"),$("#modal-body").empty(),$("#modal-body").append(e))},error:function(e){console.log(e)}})});$("#content").on("click","#btndeletebadge",function(o){o.preventDefault();var t=window.location.href+"/deletebadge",e=$("#badgeID").val();$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e},success:function(a){console.log(a),a.error?($("#error").remove(),$("#btnaddbadge").after('<div class="badge bg-danger" id="error">'+a.error+"!</div>")):($(".bdg").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(a){console.log(a)}})});$("#content").on("click","#btnsavebadge",function(o){o.preventDefault();var t=window.location.href+"/savebadge",e=$("#editbadge").serializeArray();$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:e,success:function(a){a.error?($("#error").remove(),$("#btnaddbadge").after('<div class="badge bg-danger" id="error">'+a.error+"!</div>")):($(".bdg").trigger("click"),$("#exampleModal").modal("toggle"))},error:function(a){console.log(a)}})});$("#orderstable").on("click","#btneditorder",function(o){var t=window.location.href+"/editorder/"+$(this).attr("edit");$.ajax({url:t,method:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{},success:function(e){e.error?($("#modal-body").empty(),$("#modal-body").append(e.error)):($("#exampleModalLabel").text("Редактировать заказ"),$("#modal-body").empty(),$("#modal-body").append(e))},error:function(e){console.log(e)}})});$("#modal-body").on("click",'[id^="delorderproduct"]',function(o){o.preventDefault();var t=window.location.href+"/deletefromorder",e=$(this).attr("product");$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e},success:function(a){a.error||($.toast({text:"Товар успешно удален из заказа",heading:"Панель",icon:"success",showHideTransition:"fade",allowToastClose:!0,hideAfter:2e3,stack:3,position:"top-right",textAlign:"left",loader:!0,loaderBg:"#9EC600",beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}}),$("#trprod"+e).remove(),a.noorder&&($("#exampleModal").modal("toggle"),$.toast({text:"В заказе не осталось товаров и он тоже удален",heading:"Панель",icon:"success",showHideTransition:"fade",allowToastClose:!0,hideAfter:2e3,stack:3,position:"top-right",textAlign:"left",loader:!0,loaderBg:"#9EC600",beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}}),setInterval(function(){window.location.reload()},2e3)))},error:function(a){console.log(a)}})});$("#modal-body").on("click","#btndeleteorder",function(o){o.preventDefault();var t=window.location.href+"/deleteorder",e=$(this).attr("order");$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{id:e},success:function(a){a.error||($("#exampleModal").modal("toggle"),$.toast({text:"Заказ успешно удален",heading:"Панель",icon:"success",showHideTransition:"fade",allowToastClose:!0,hideAfter:2e3,stack:3,position:"top-right",textAlign:"left",loader:!0,loaderBg:"#9EC600",beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}}),setInterval(function(){window.location.reload()},2e3))},error:function(a){console.log(a)}})});$("#modal-body").on("click","#btnsaveorder",function(o){o.preventDefault();var t=window.location.href+"/saveorder",e=$(this).attr("order"),a=new FormData;a.append("id",e);var d=$("#editorder").serializeArray();$.each(d,function(r,n){a.append(n.name,n.value)}),$.ajax({url:t,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:a,processData:!1,contentType:!1,success:function(r){r.error||($("#exampleModal").modal("toggle"),$.toast({text:"Заказ успешно сохранен",heading:"Панель",icon:"success",showHideTransition:"fade",allowToastClose:!0,hideAfter:2e3,stack:3,position:"top-right",textAlign:"left",loader:!0,loaderBg:"#9EC600",beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}}),setInterval(function(){window.location.reload()},2e3))},error:function(r){console.log(r)}})});$("#searchorder").on("click",function(o){o.preventDefault();var t=window.location.href+"/search/"+$("#search").val();$.ajax({method:"GET",url:t,data:{},success:function(e){if(e.error){$("#search").val(e.error);return}$("#orderstable").empty(),$("#orderstable").append(e.data)},error:function(e){console.log(e)}})});$("#searchuser").on("click",function(o){o.preventDefault();var t=window.location.href+"/search/"+$("#search").val();$.ajax({method:"GET",url:t,data:{},success:function(e){if(e.error){$("#search").val(e.error);return}$("#orderstable").empty(),$("#orderstable").append(e.data)},error:function(e){console.log(e)}})});
